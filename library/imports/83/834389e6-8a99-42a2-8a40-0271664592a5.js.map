{"version":3,"sources":["assets\\scripts\\game.js"],"names":["cc","Class","Component","properties","starPrefab","type","Prefab","minStarDuration","maxStarDuration","ground","Node","player","scoreDisplay","Label","scoreAudio","AudioClip","spawnNewStar","newStar","getComponent","game","onLoad","groundY","y","height","timer","starDuration","score","instantiate","node","addChild","setPosition","getNewstarPosition","Math","random","getNewStarPosition","randX","randY","jumpHeight","maxX","width","v2","start","gainScore","string","AudioEngine","playEffect","gameOver","stopAllActions","director","loadScene"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n    // this property quotes preFab resource of star\r\n    starPrefab: {\r\n      default: null,\r\n      type: cc.Prefab,\r\n    },\r\n    // the random scale of disappearing time of star\r\n    minStarDuration: 0,\r\n    maxStarDuration: 0,\r\n    // ground node for confirming the height of star\r\n    ground: {\r\n      default: null,\r\n      type: cc.Node,\r\n    },\r\n    // playernode for obtaining jump height of character and controlling the movement\r\n    player: {\r\n      default: null,\r\n      type: cc.Node,\r\n    },\r\n    scoreDisplay: {\r\n      default: null,\r\n      type: cc.Label,\r\n    },\r\n    scoreAudio: {\r\n      default: null,\r\n      type: cc.AudioClip,\r\n    },\r\n  },\r\n\r\n  spawnNewStar: function () {\r\n    newStar.getComponent(\"Star\").game = this;\r\n  },\r\n\r\n  onLoad: function () {\r\n    // obtain anchor point of grounf level\r\n    this.groundY = this.ground.y + this.ground.height / 2;\r\n    this.timer=0;\r\n    this.starDuration=0;\r\n    this.spawnNewStar();\r\n    this.score = 0;\r\n  },\r\n\r\n  spawnNewStar: function () {\r\n    // generate a new node in the scene with a preset template\r\n    var newStar = cc.instantiate(this.starPrefab);\r\n    // put the newly added node under the Canvas node\r\n    this.node.addChild(newStar);\r\n    // set upa random position for the star\r\n    newStar.setPosition(this.getNewstarPosition());\r\n    newStar.getComponent('Star').game=this;\r\n    this.starDuration = this.minStarDuration + Math.random()*(this.maxStarDuration - this.minStarDuration);\r\n    this.timer=0;\r\n  },\r\n\r\n  getNewStarPosition: function () {\r\n    var randX = 0;\r\n    // According to the position of the ground level and the main character's jump height, randomly\r\n    var randY =\r\n      this.groundY +\r\n      Math.random() * this.player.getComponent(\"Player\").jumpHeight +\r\n      50;\r\n    // according to the width of the screen, randomly obtain an anchor point of star on the x axis\r\n    var maxX = this.node.width / 2;\r\n    randX = (Math.random() - 0.5) * 2 * maxX;\r\n    //  return to the anchor point of the star\r\n    return cc.v2(randX, randY);\r\n  },\r\n  start() {},\r\n\r\n  gainScore: function () {\r\n    this.score += 1;\r\n    this.scoreDisplay.string = \"Score: \" + this.score;\r\n    cc.AudioEngine.playEffect(this.scoreAudio,false);\r\n  },\r\n\r\n  gameOver: function () {\r\n    this.player.stopAllActions();\r\n    cc.director.loadScene('game');\r\n  }\r\n  // update (dt) {},\r\n});\r\n "]}